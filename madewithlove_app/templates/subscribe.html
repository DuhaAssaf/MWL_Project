{% extends 'base.html' %}
{% block content %}
{% comment %} <div class="container" style="max-width: 500px; margin-top: 50px;">
    <h2 class="text-center mb-4">Subscribe to {{ plan|title }} Plan</h2>
    <form method="post">
        {% csrf_token %}
        <div class="form-group mb-3">
            <label for="card_name">Name on Card</label>
            <input type="text" class="form-control" id="card_name" name="card_name" required>
        </div>
        <div class="form-group mb-3">
            <label for="card_number">Card Number</label>
            <input type="text" class="form-control" id="card_number" name="card_number" required>
        </div>
        <div class="row mb-3">
            <div class="col">
                <label for="expiry_date">Expiry Date</label>
                <input type="text" class="form-control" id="expiry_date" name="expiry_date" placeholder="MM/YY" required>
            </div>
            <div class="col">
                <label for="cvv">CVV</label>
                <input type="text" class="form-control" id="cvv" name="cvv" required>
            </div>
        </div>
        <input type="hidden" name="plan" value="{{ plan }}">
        <button type="submit" class="btn btn-primary w-100">Subscribe Now</button>
    </form>
</div>
{% endblock %} {% endcomment %}

<section class="py-5">
    <div class="container col-md-6">
        <h2 class="text-center mb-4">Subscribe to {{ plan|title }} Plan</h2>
        <form method="POST" onsubmit="return validateForm();">
        {% csrf_token %}
  
        <div class="mb-3">
          <label class="form-label">Full Name</label>
          <input type="text" name="full_name" class="form-control" required>
        </div>
  
        <div class="mb-3">
          <label class="form-label">Visa Card Number</label>
          <input type="text" name="card_number" id="card_number" class="form-control" maxlength="8" required>
        </div>
  
        <div class="mb-3">
          <label class="form-label">Expiry Date </label>
          <input type="text" name="expiry_date" id="expiry_date" class="form-control" placeholder="MM/YY" required>
        </div>
  
        <div class="mb-3">
          <label class="form-label">CVV</label>
          <input type="text" name="cvv" id="cvv" class="form-control" maxlength="3" required>
        </div>
  
        <div class="mb-3">
          <label class="form-label">Plan Price (USD)</label>
          <input type="text" name="price" class="form-control" value="{{ price }}" readonly disabled>
        </div>
  
        <div class="d-grid">
          <button type="submit" class="btn btn-primary">Subscribe Now</button>
        </div>
      </form>
  
      <div class="mt-3" id="error-message" style="color: red;"></div>
    </div>
  </section>
  
  <script>
    function validateForm() {
      const card = document.getElementById("card_number").value;
      const expiry = document.getElementById("expiry_date").value;
      const cvv = document.getElementById("cvv").value;
      const errorMessage = document.getElementById("error-message");
      errorMessage.textContent = "";
  
      if (!/^\d{8}$/.test(card)) {
        errorMessage.textContent = "Card number must be exactly 8 digits.";
        return false;
      }
  
      if (!/^\d{2}\/\d{2}$/.test(expiry)) {
        errorMessage.textContent = "Expiry date must be in MM/YY format.";
        return false;
      }
  
      if (!/^\d{3}$/.test(cvv)) {
        errorMessage.textContent = "CVV must be exactly 3 digits.";
        return false;
      }
  
      return true;
    }
  </script>
  {% endblock %}
